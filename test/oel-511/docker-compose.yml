version: '3.7'
services:
  # umc nodes that run collectors
  ukbn01hr:
    image: ${IMAGE_OEL511} 
    container_name: umc-ukbn01hr
    user: oracle 
    hostname: ukbn01hr.umc.local 
    stdin_open: true
    tty: true
    command: /bin/bash -l
    volumes:
      - ../../:/home/oracle/umc
    networks:
      umcnet:
        ipv4_address: 192.168.10.101  

  ukbn02hr:
    image: ${IMAGE_OEL511}
    container_name: umc-ukbn02hr
    user: oracle
    hostname: ukbn02hr.umc.local
    stdin_open: true
    tty: true
    command: /bin/bash -l
    volumes:
      - ../../:/home/oracle/umc
    networks:
      umcnet:
        ipv4_address: 192.168.10.102

  ukbn03hr:
    image: ${IMAGE_OEL511}
    container_name: umc-ukbn03hr
    user: oracle
    hostname: ukbn03hr.umc.local
    stdin_open: true
    tty: true
    command: /bin/bash -l
    volumes:
      - ../../:/home/oracle/umc
    networks:
      umcnet:
        ipv4_address: 192.168.10.103

  # influxdb and umcpush
  ukbn10hr:
    image: ${IMAGE_OEL511}
    container_name: umc-ukbn10hr
    user: oracle
    hostname: ukbn10hr.umc.local
    stdin_open: true
    tty: true
    command: /bin/bash -l -c "start-influxd.sh && start-umcpush && /bin/bash -l"
    volumes:
      - ../../:/home/oracle/umc
    networks:
      umcnet:
        ipv4_address: 192.168.10.110

  # influxdb node with db from NPP
  ukbn20hr:
    image: ${IMAGE_OEL511}
    container_name: umc-ukbn20hr
    user: oracle
    hostname: ukbn20hr.umc.local
    stdin_open: true
    tty: true
    command: /bin/bash -l -c "start-influxd.sh && /bin/bash -l"
    volumes:
      - ../../:/home/oracle/umc
    ports:
      - "8086:8086"
    networks:
      umcnet:
        ipv4_address: 192.168.10.120

  grafana:
    image: tomvit/grafana:1.0
    container_name: umc-grafana
    ports:
      - "3000:3000"
    networks:
      umcnet:
        ipv4_address: 192.168.10.220

networks:
  umcnet:
    ipam:
      driver: default
      config:
      - subnet: 192.168.0.0/16

